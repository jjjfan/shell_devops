# date命令.md
---  
## date命令
### 命令功能：date 可以用来显示或设定系统的日期与时间。
> date [选项] [格式]  
> date [-u|--utc|--universal] [MMDDhhmm[[CC]yy][.ss]]
>> date命令根据指定格式显示当前时间或设置系统时间。很多shell脚本中需要用到date命令来执行操作，例如备份时生成带日期的压缩文件包。  

### 命令参数  
> -d<字符串>,--date=STRING：显示字符串所指的日期与时间，而不是当前时间，且该选项不会改变系统时间。字符串前后必须加上双引号；   
> -s<字符串>,--set=STRING：根据字符串来设置日期与时间。字符串前后必须加上双引号；   
> -u,--utc,--universal：显示或设置全球时间UTC；   
> --help：在线帮助；   
> --version：显示版本信息。  
>-f,--file=DATEFILE 显示DATEFILE中每一行指定的时间，如同将DATEFILE中每一行作为--date的参数一样  
>-I[TIMESPEC],--iso-8601[=TIMESPEC] 按照ISO-8601的格式输出日期/时间。TIMESPEC的值可以是date、hours、minutes、seconds、ns，表示输出到哪一位为止，默认date，输出年月日。  
>-r,--reference=FILE 显示FILE的最后修改时间  
>-R,--rfc-2822 按照RFV-2822格式输出日期和时间。例如：Sat, 27 Apr 2019 17:05:27 +0800  
>--rfc-3339=TIMESPEC 按照RFC-3339格式输出日期和时间。TIMESPEC的值可以是date、seconds、ns，表示输出到哪一位为止。 

### 日期格式字符串列表  
        %% 转义%  
        %a 当前区域的星期几的简写（Sun..Sat）    
        %A 当前区域的星期几的全称（Sunday..Saturday）   
        %b 当前区域的月份的简写（Jan..Dec）   
        %B 当前区域的月份全称（January..December）   
        %c 当前区域的日期和时间  
        %C 世纪，类似%Y  
        %d 月份中的几号（01..31）  
        %D 日期，等同于%m/%d/%y  
        %e 月份中的几号，去零表示，等同于%_d  
        %F 全部日期，等同于%Y-%m-%d  
        %g ISO格式年份的最后两位数字  
        %G ISO格式年份的，一般只和%V一起使用  
        %h 等同于%b  
        %H （24小时制）小时（00..23）  
        %I （12小时制）小时（01..12）  
        %j 年份中的日期（001..366）  
        %k （24小时制）小时，去零表示，等同于%_H（0..23）  
        %l （12小时制）小时，去零表示，等同于%_I（1..12）  
        %m 月份（01..12）  
        %M 分钟（00..59）  
        %n 一个新行，即转行  
        %N 纳秒（000000000..999999999）  
        %p 当前区域时间是AM还是PM，不知道则为空  
        %P 类似%p，但小写字母，即am和pm  
        %r 按12小时制显示时间，hh:mm:ss AM/PM  
        %R 按24小时制显示小时和分钟，等同于%H:%M  
        %s 从1970年1月1日0点0分0秒到现在过了多少秒  
        %S 秒（00..60）  
        %t 一个tab制表符  
        %T 时间，等同于%H:%M:%S  
        %u 一周中的第几天（1..7），1是Monday  
        %U 一年中的第几个星期，以星期天作为一周的开始（00..53）  
        %V 一年中的第几个星期（ISO标准），以星期一作为一周的开始（01..53）  
        %w 一周中的第几天（0..6），0是Sunday  
        %W 一年中的第几个星期，以星期一作为一周的开始（00..53）  
        %x 按照mm/dd/yy的格式显示当前日期  
        %X 按照%H:%M:%S的格式显示当前时间（12小时制）  
        %y 年份的后两位（00..99）  
        %Y 年份（1970..）  
        %z 数字时区，格式+hhmm，例如-0400  
        %:z 数字时区，格式+hh:mm，例如-04:00  
        %::z 数字时区，格式+hh:mm:ss，例如-04:00:00  
        %:::z 数字时区，带有必要的精确度，例如-04,+05:30  
        %Z 时区名，缩写，例如EDT<br>默认情况下，用0填充数据的空缺部分，以下选项跟在%后面：  
        - 不进行填充  
        _ 用空格进行填充  
        0 用0填充  
        ^ 如果可能使用大写（并非百分百）  
        \# 如果可能使用相反大小写（并非百分百）  
        %H 小时(以00-23来表示)    
        %I 小时(以01-12来表示)    
        %K 小时(以0-23来表示)    
        %l 小时(以0-12来表示)    
        %M 分钟(以00-59来表示)    
        %P AM或PM    
        %r 时间(含时分秒，小时以12小时AM/PM来表示)    
        %s 总秒数。起算时间为1970-01-01 00:00:00 UTC    
        %S 秒(以本地的惯用法来表示)    
        %T 时间(含时分秒，小时以24小时制来表示)    
        %X 时间(以本地的惯用法来表示)    
        %Z 市区    
        %a 星期的缩写    
        %A 星期的完整名称    
        %b 月份英文名的缩写    
        %B 月份的完整英文名称    
        %c 日期与时间。只输入date指令也会显示同样的结果    
        %d 日期(以01-31来表示)    
        %D 日期(含年月日)    
        %j 该年中的第几天    
        %m 月份(以01-12来表示)    
        %U 该年中的周数    
        %w 该周的天数，0代表周日，1代表周一，异词类推    
        %x 日期(以本地的惯用法来表示)    
        %y 年份(以00-99来表示)    
        %Y 年份(以四位数来表示)    
        %n 在显示时，插入新的一行    
        %t 在显示时，插入tab    
        MM 月份(必要)   
        DD 日期(必要)   
        hh 小时(必要)   
        mm 分钟(必要)  
        ss 秒(选择性)  
### 实例
#### 格式化输出：  
date +"%Y-%m-%d"   
2015-12-07  
#### 输出昨天日期：  
date -d "1 day ago" +"%Y-%m-%d"  
2015-11-19  
#### 2秒后输出：  
date -d "2 second" +"%Y-%m-%d %H:%M.%S"  
2015-11-20 14:21.31  
#### 传说中的 1234567890 秒：  
date -d "1970-01-01 1234567890 seconds" +"%Y-%m-%d %H:%m:%S"  
2009-02-13 23:02:30  
#### 普通转格式：  
date -d "2009-12-12" +"%Y/%m/%d %H:%M.%S"  
2009/12/12 00:00.00  
#### apache格式转换：  
date -d "Dec 5, 2009 12:00:37 AM" +"%Y-%m-%d %H:%M.%S"  
2009-12-05 00:00.37  
#### 格式转换后时间：  
date -d "Dec 5, 2009 12:00:37 AM 2 year ago" +"%Y-%m-%d %H:%M.%S"  
2007-12-05 00:00.37  
#### 加减操作：  
date +%Y%m%d               #显示前天年月日   
date -d "+1 day" +%Y%m%d   #显示前一天的日期   
date -d "-1 day" +%Y%m%d   #显示后一天的日期   
date -d "-1 month" +%Y%m%d #显示上一月的日期   
date -d "+1 month" +%Y%m%d #显示下一月的日期   
date -d "-1 year" +%Y%m%d  #显示前一年的日期   
date -d "+1 year" +%Y%m%d  #显示下一年的日期  
#### 设定时间：  
date -s          #设置当前时间，只有root权限才能设置，其他只能查看   
date -s 20120523 #设置成20120523，这样会把具体时间设置成空00:00:00   
date -s 01:01:01 #设置具体时间，不会对日期做更改   
date -s "01:01:01 2012-05-23" #这样可以设置全部时间   
date -s "01:01:01 20120523"   #这样可以设置全部时间   
date -s "2012-05-23 01:01:01" #这样可以设置全部时间   
date -s "20120523 01:01:01"   #这样可以设置全部时间  
#### 显示当前日期  
[fan@desktop01 ~]$ date +%F  
2019-11-27  
[fan@desktop01 ~]$ date +%Y-%m-%d  
2019-11-27  
[fan@desktop01 ~]$ date +%Y%m%d  
20190502  
[fan@desktop01 ~]$ date +%x  
11/27/2019  
[fan@desktop01 ~]$ date +%m/%d/%Y  
11/27/2019  
#### 显示当前时间  
[fan@desktop01 ~]$ date +%T  
16:01:13  
[fan@desktop01 ~]$ date +%H:%M:%S  
16:01:33  
[fan@desktop01 ~]$ date +%X  
04:01:41 PM  
[fan@desktop01 ~]$ date +%r  
04:02:45 PM  
[fan@desktop01 ~]$ date +%R  
16:03  
[fan@desktop01 ~]$ date +%H:%M  
16:03  
#### 显示日期与时间  
[fan@desktop01 ~]$ date  
Thu Nov  27 20:14:16 CST 2019  
[fan@desktop01 ~]$ date +"%F %T"  
2019-11-27 17:12:31  
[fan@desktop01 ~]$ date +"%Y-%m-%d %H:%M:%S"  
2019-11-27 17:17:23  
#### 设置时间  
修改时间需要到root用户下  
[fan@desktop01 ~]# date -s "20190101"  
2019年 01月 01日 星期二 00:00:00 CST  
[fan@desktop01 ~]# date  
2019年 01月 01日 星期二 00:00:02 CST  
[fan@desktop01 ~]# date -s 20190502  
2019年 05月 02日 星期四 00:00:00 CST  
[fan@desktop01 ~]# date  
2019年 05月 02日 星期四 00:00:02 CST  
#### 同步网络时间  
[fan@desktop01 ~]# ntpdate -u ntp.api.bz  
 2 May 16:17:48 ntpdate[11892]: step time server 114.118.7.163 offset 58563.111835 sec  
[fan@desktop01 ~]# date  
2019年 05月 02日 星期四 16:17:52 CST  
#### 扩展：ntp常用服务器：  
中国国家授时中心：210.72.145.44  
NTP服务器(上海) ：ntp.api.bz  
美国： time.nist.gov  
复旦： ntp.fudan.edu.cn  
微软公司授时主机(美国) ：time.windows.com  
北京邮电大学 : s1a.time.edu.cn  
清华大学 : s1b.time.edu.cn  
北京大学 : s1c.time.edu.cn  
台警大授时中心(台湾)：asia.pool.ntp.org  

#### 扩展：检查一组命令花费的时间：
#!/bin/bash 
start=$(date +%s) 
nmap man.linuxde.net &> /dev/null 
end=$(date +%s) 
difference=$(( end - start )) 
echo $difference seconds.


